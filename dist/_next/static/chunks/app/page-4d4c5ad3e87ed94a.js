(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2528:(e,t,s)=>{"use strict";s.d(t,{A:()=>i,O:()=>c});var r=s(5155),n=s(2115),a=s(9670),o=s(6203);let l=(0,n.createContext)(),i=()=>(0,n.useContext)(l),c=e=>{let{children:t}=e,[s,i]=(0,n.useState)(null);return(0,n.useEffect)(()=>(0,o.hg)(a.j,e=>{i(e)}),[]),(0,r.jsx)(l.Provider,{value:{user:s},children:t})}},2834:(e,t,s)=>{Promise.resolve().then(s.bind(s,6402))},6402:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(5155),n=s(2115),a=s(2177),o=s(2528),l=s(9670),i=s(5317);let c=async()=>{try{let e=(0,i.rJ)(l.db,"Lists");return(await (0,i.GG)(e)).docs.map(e=>e.data())}catch(e){return console.error("Error fetching lists: ",e),[]}},d=async e=>{try{let t=e.map(async e=>{let t=(await (0,i.GG)((0,i.rJ)(l.db,e))).docs.map(e=>e.data());return{store:e,transactions:t}});return await Promise.all(t)}catch(e){return console.error("Error fetching lists: ",e),[]}},u=async(e,t)=>{try{await (0,i.gS)((0,i.rJ)(l.db,e),t)}catch(e){console.error("Error adding transaction: ",e)}},m=async(e,t)=>{try{await (0,i.BN)((0,i.H9)(l.db,"Lists",e),{[t]:t},{merge:!0})}catch(e){console.error("Error adding transaction: ",e)}};function h(e){let{setStoresList:t,storesList:s}=e,[a,o]=(0,n.useState)(""),l=async e=>{e.preventDefault(),a&&(t([...s,a]),m("Stores",a),o(""))};return(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-700",children:"Register New Store"}),(0,r.jsxs)("form",{onSubmit:l,className:"mt-4",children:[(0,r.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"Enter Store Name",className:"w-full p-3 border rounded-md shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{type:"submit",className:"w-full mt-4 p-3 bg-green-600 text-white rounded-md shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition duration-200",children:"Register Store"})]})]})}function g(e){let{storeSelected:t,transactionData:s}=e,n=t?s.filter(e=>e.store===t):s;return t&&n.length>0&&(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsx)("ul",{className:"mt-4 space-y-4",children:n.map((e,t)=>(0,r.jsx)("li",{className:"p-4 border rounded-md shadow-sm bg-gray-100",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:e.company})," - $",e.amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," (",e.type,")"]})},t))})})}function f(e){let{isModalOpen:t,handleConfirmSubmit:s,setIsModalOpen:n}=e;return t&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirm Submission"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to submit this transaction?"}),(0,r.jsx)("p",{className:"text-red-600 mb-4 text-lg",children:"You won't be able to edit/change once its confirmed!"}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{onClick:()=>n(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-700",children:"Cancel"}),(0,r.jsx)("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Confirm"})]})]})})}function p(e){let{setCompanyList:t,companyList:s}=e,[a,o]=(0,n.useState)(""),l=async e=>{e.preventDefault(),a&&(t([...s,a]),m("Companies",a),o(""))};return(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-700",children:"Register New Company"}),(0,r.jsxs)("form",{onSubmit:l,className:"mt-4",children:[(0,r.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"Enter Company Name",className:"w-full p-3 border rounded-md shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{type:"submit",className:"w-full mt-4 p-3 bg-green-600 text-white rounded-md shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition duration-200",children:"Register Company"})]})]})}function x(){let[e,t]=(0,n.useState)(""),[s,l]=(0,n.useState)(""),[i,m]=(0,n.useState)([]),{user:x}=(0,o.A)(),{register:b,handleSubmit:j,reset:y}=(0,a.mN)(),[v,w]=(0,n.useState)([]),[N,S]=(0,n.useState)([]),[C,E]=(0,n.useState)(!1),[k,I]=(0,n.useState)(null),L=t=>{let s={...t,date:new Date().toLocaleDateString()};u(e,{...s}),m([...i,{...s,store:e}]),l(""),y()},D=e=>{I(e),E(!0)};return(0,n.useEffect)(()=>{(async()=>{let[e,t]=await c("Lists"),s=Object.values(t);S(s),w(Object.values(e));let r=await d(s),n=new Date().toLocaleDateString("en-US");m(r.map(e=>{let{store:t,transactions:s}=e;return s.filter(e=>e.date===n&&""!==e.date).map(e=>({...e,store:t}))}).flat())})()},[]),(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-700",children:"Add Transaction"}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("select",{onChange:e=>t(e.target.value),value:e,className:"w-full p-3 border rounded-md shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Select a Store"}),N.map((e,t)=>(0,r.jsx)("option",{value:e,children:e},t))]})}),e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("div",{children:"Company:"}),(0,r.jsxs)("select",{...b("company",{required:!0}),onChange:e=>l(e.target.value),value:s,className:"w-full p-3 border rounded-md shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Select a Company"}),v.map((e,t)=>(0,r.jsx)("option",{value:e,children:e},t))]})]}),!s&&(0,r.jsx)(p,{setCompanyList:w,companyList:v})]}),e&&s&&(0,r.jsxs)("form",{onSubmit:j(e=>D(e)),className:"mt-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Amount:"}),(0,r.jsx)("input",{...b("amount",{required:!0}),type:"number",step:".01",placeholder:"Enter Amount",className:"w-full p-3 border rounded-md shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Type:"}),(0,r.jsxs)("select",{...b("type",{required:!0}),className:"w-full p-3 border rounded-md shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Select a Type"}),(0,r.jsx)("option",{value:"Invoice",children:"Invoice"}),(0,r.jsx)("option",{value:"Payment",children:"Payment"})]})]}),(0,r.jsx)("button",{type:"submit",className:"w-full p-3 bg-blue-600 text-white rounded-md shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:"Save"})]}),!e&&(0,r.jsx)(h,{setStoresList:S,storesList:N}),(0,r.jsx)(f,{isModalOpen:C,handleConfirmSubmit:()=>{L(k),E(!1)},setIsModalOpen:E}),(0,r.jsx)(g,{transactionData:i,storeSelected:e})]})}},9670:(e,t,s)=>{"use strict";s.d(t,{db:()=>i,j:()=>l});var r=s(3915),n=s(6203),a=s(5317);let o=(0,r.Wp)({apiKey:"AIzaSyBrhGNzC2JEoYMR34bXv2vwMBQPVNl3NG8",authDomain:"freshmart-tracker.firebaseapp.com",projectId:"freshmart-tracker",storageBucket:"freshmart-tracker.firebasestorage.app",messagingSenderId:"36913606146",appId:"1:36913606146:web:5516b95ff654f02a9fc11b",measurementId:"G-MP5V2Y0VX2"}),l=(0,n.xI)(o),i=(0,a.aU)(o)}},e=>{var t=t=>e(e.s=t);e.O(0,[992,888,645,558,441,684,358],()=>t(2834)),_N_E=e.O()}]);